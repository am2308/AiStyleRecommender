import{j as e,A as s,m as a,t as i,X as l,a as t,Z as r,l as n}from"./vendor-ui-DQARcV5T.js";import{r as c}from"./vendor-react-CLKTprKu.js";import{b as d}from"./index-BDHgIuTY.js";const o={getPlans:async()=>(await d.get("/subscription/plans")).data,getStatus:async()=>(await d.get("/subscription/status")).data,subscribe:async e=>(await d.post("/subscription/subscribe",{plan:e})).data,cancel:async()=>(await d.post("/subscription/cancel")).data},m=({isOpen:d,onClose:m,onSuccess:x})=>{const[p,u]=c.useState([]),[h,b]=c.useState(""),[g,j]=c.useState(!1),[N,f]=c.useState(!1);c.useEffect(()=>{d&&y()},[d]);const y=async()=>{try{j(!0);const e=await o.getPlans();u(e.plans);const s=e.plans.find(e=>e.popular);s&&b(s.id)}catch(e){}finally{j(!1)}};return d?e.jsx(s,{children:e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx(a.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:m}),e.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"â€‹"}),e.jsxs(a.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"relative inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-4xl sm:w-full",onClick:e=>e.stopPropagation(),children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-blue-600 px-6 py-8 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(i,{className:"w-8 h-8"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Upgrade to Premium"}),e.jsx("p",{className:"text-purple-100",children:"Unlock unlimited outfit recommendations"})]})]}),e.jsx("button",{onClick:m,className:"text-white hover:text-gray-200 transition-colors",children:e.jsx(l,{size:24})})]})}),e.jsx("div",{className:"px-6 py-8",children:g?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-purple-600"})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"What you'll get:"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-green-100 rounded-full p-2",children:e.jsx(t,{className:"w-5 h-5 text-green-600"})}),e.jsx("span",{className:"text-gray-700",children:"Unlimited outfit recommendations"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-blue-100 rounded-full p-2",children:e.jsx(r,{className:"w-5 h-5 text-blue-600"})}),e.jsx("span",{className:"text-gray-700",children:"Smart shopping suggestions"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-purple-100 rounded-full p-2",children:e.jsx(i,{className:"w-5 h-5 text-purple-600"})}),e.jsx("span",{className:"text-gray-700",children:"Priority support"})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:p.map(s=>e.jsxs(a.div,{whileHover:{scale:1.02},className:`relative border-2 rounded-lg p-6 cursor-pointer transition-all ${h===s.id?"border-purple-500 bg-purple-50":"border-gray-200 hover:border-purple-300"} ${s.popular?"ring-2 ring-purple-500":""}`,onClick:()=>b(s.id),children:[s.popular&&e.jsx("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2",children:e.jsx("span",{className:"bg-purple-500 text-white px-3 py-1 rounded-full text-xs font-medium",children:"Most Popular"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("h4",{className:"text-lg font-semibold mb-2",children:s.name}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("span",{className:"text-3xl font-bold",children:["$",s.price]}),e.jsxs("span",{className:"text-gray-500",children:["/",s.duration]})]}),s.originalPrice&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("span",{className:"text-sm text-gray-500 line-through",children:["$",s.originalPrice]}),e.jsxs("span",{className:"ml-2 text-sm text-green-600 font-medium",children:["Save ",s.savings]})]}),e.jsx("ul",{className:"text-sm text-gray-600 space-y-2",children:s.features.map((s,a)=>e.jsxs("li",{className:"flex items-center",children:[e.jsx(n,{className:"w-4 h-4 text-green-500 mr-2 flex-shrink-0"}),s]},a))})]}),h===s.id&&e.jsx("div",{className:"absolute inset-0 border-2 border-purple-500 rounded-lg pointer-events-none",children:e.jsx("div",{className:"absolute top-2 right-2",children:e.jsx("div",{className:"bg-purple-500 rounded-full p-1",children:e.jsx(n,{className:"w-4 h-4 text-white"})})})})]},s.id))}),e.jsxs("div",{className:"text-center",children:[e.jsx("button",{onClick:async()=>{if(h)try{f(!0),await o.subscribe(h),x()}catch(e){alert(e.message||"Subscription failed. Please try again.")}finally{f(!1)}},disabled:!h||N,className:"w-full md:w-auto px-8 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:N?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-t-2 border-b-2 border-white mr-2"}),"Processing..."]}):"Subscribe Now"}),e.jsx("p",{className:"text-xs text-gray-500 mt-4",children:"* This is a demo subscription. No actual payment will be processed."})]})]})})]})]})})}):null};export{m as S,o as s};
