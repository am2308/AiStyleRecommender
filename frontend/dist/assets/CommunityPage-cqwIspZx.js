import{j as e,A as s,m as t,D as l,X as r,z as a,J as i,I as n,ae as o,af as c,r as d,U as x,ag as m,o as h,ah as p,g,ai as u,a3 as b,C as j,p as f,q as y,W as N,aj as v,ak as w,t as k,x as C,T as S,c as P}from"./vendor-ui-DQARcV5T.js";import{r as L,e as z,L as A,u as D}from"./vendor-react-CLKTprKu.js";import{u as E,a as F,F as U}from"./index-BDHgIuTY.js";import{c as T}from"./communityService-CfB81qMn.js";import{u as R}from"./index-B_NMLkog.js";import"./vendor-three-D8-qaPKY.js";const I=({isOpen:d,onClose:x,onSubmit:m,wardrobeItems:h,challenges:p})=>{var g;const{user:u}=E(),[b,j]=L.useState(""),[f,y]=L.useState([]),[N,v]=L.useState(""),[w,k]=L.useState([]),[C,S]=L.useState(""),[P,z]=L.useState([]),[A,D]=L.useState([]),[F,U]=L.useState(""),[T,I]=L.useState(!1),[J,M]=L.useState(null),$=L.useRef(null),{getRootProps:W,getInputProps:O,isDragActive:B}=R({accept:{"image/*":[".jpeg",".jpg",".png",".webp"]},maxSize:5242880,maxFiles:4,onDrop:e=>{if(e.length>0){z(s=>[...s,...e].slice(0,4));const s=e.map(e=>URL.createObjectURL(e));D(e=>[...e,...s].slice(0,4)),M(null)}},onDropRejected:e=>{var s,t,l;const r=e[0];"file-too-large"===(null==(s=r.errors[0])?void 0:s.code)?M("File size must be less than 5MB"):"file-invalid-type"===(null==(t=r.errors[0])?void 0:t.code)?M("Only image files are allowed"):"too-many-files"===(null==(l=r.errors[0])?void 0:l.code)?M("Maximum 4 images allowed"):M("Invalid file")}}),V=()=>{F.trim()&&!w.includes(F.trim())&&(k([...w,F.trim()]),U(""))},Y=()=>{A.forEach(e=>URL.revokeObjectURL(e)),D([]),z([]),j(""),y([]),v(""),k([]),S(""),M(null),x()};return e.jsx(s,{children:d&&e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx(t.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-gray-900/75 backdrop-blur-sm transition-opacity",onClick:Y}),e.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"​"}),e.jsxs(t.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"relative inline-block align-bottom bg-white rounded-2xl text-left overflow-hidden shadow-2xl transform transition-all sm:my-8 sm:align-middle sm:max-w-2xl sm:w-full",onClick:e=>e.stopPropagation(),children:[e.jsxs("div",{className:"flex justify-between items-center px-6 py-4 bg-gradient-to-r from-purple-50 to-pink-50 border-b",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-100 to-pink-100 rounded-full p-2",children:e.jsx(l,{className:"w-5 h-5 text-purple-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Create Style Post"})]}),e.jsx("button",{type:"button",onClick:Y,className:"text-gray-500 hover:text-gray-700 transition-colors",children:e.jsx(r,{size:20})})]}),e.jsxs("div",{className:"px-6 py-4",children:[J&&e.jsx(t.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:e.jsx("p",{className:"text-sm text-red-600",children:J})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-purple-400 to-pink-400 rounded-full flex items-center justify-center text-white font-bold",children:(null==(g=null==u?void 0:u.name)?void 0:g.charAt(0))||"U"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:(null==u?void 0:u.name)||"User"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Sharing with everyone"})]})]}),e.jsx("div",{children:e.jsx("textarea",{ref:$,value:b,onChange:e=>j(e.target.value),placeholder:"Share your style story...",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 resize-none",rows:3})}),e.jsx("div",{children:A.length>0?e.jsxs("div",{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-2",children:[A.map((s,t)=>e.jsxs("div",{className:"relative aspect-square",children:[e.jsx("img",{src:s,alt:`Preview ${t+1}`,className:"w-full h-full object-cover rounded-lg"}),e.jsx("button",{onClick:()=>(e=>{URL.revokeObjectURL(A[e]),D(s=>s.filter((s,t)=>t!==e)),z(s=>s.filter((s,t)=>t!==e))})(t),className:"absolute top-2 right-2 p-1 bg-red-500 rounded-full text-white hover:bg-red-600 transition-colors",children:e.jsx(r,{size:14})})]},t)),A.length<4&&e.jsxs("div",{...W(),className:"aspect-square border-2 border-dashed border-gray-300 rounded-lg flex items-center justify-center cursor-pointer hover:border-purple-400 hover:bg-gray-50 transition-all",children:[e.jsx("input",{...O()}),e.jsx(a,{size:24,className:"text-gray-400"})]})]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[4-A.length," more ",3===A.length?"image":"images"," allowed"]})]}):e.jsxs("div",{...W(),className:"border-2 border-dashed rounded-lg px-6 pt-5 pb-6 flex justify-center cursor-pointer transition-all "+(B?"border-purple-400 bg-purple-50":"border-gray-300 hover:border-purple-400 hover:bg-gray-50"),children:[e.jsx("input",{...O()}),e.jsxs("div",{className:"space-y-1 text-center",children:[e.jsx(i,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium text-purple-600 hover:text-purple-500",children:"Upload photos"})," ","or drag and drop"]}),e.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG, WEBP up to 5MB (max 4 images)"})]})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tag Wardrobe Items"}),0===h.length?e.jsxs("p",{className:"text-sm text-gray-500",children:["No wardrobe items available. ",e.jsx("a",{href:"/wardrobe",className:"text-purple-600 hover:text-purple-800",children:"Add items to your wardrobe"})]}):e.jsx("div",{className:"max-h-40 overflow-y-auto p-2 border border-gray-200 rounded-lg",children:h.map(s=>e.jsxs("div",{className:"flex items-center space-x-3 p-2 rounded-lg cursor-pointer mb-1 "+(f.includes(s.id)?"bg-purple-100 border border-purple-200":"hover:bg-gray-100"),onClick:()=>{return e=s.id,void(f.includes(e)?y(f.filter(s=>s!==e)):y([...f,e]));var e},children:[e.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded overflow-hidden",children:e.jsx("img",{src:s.imageUrl,alt:s.name,className:"w-full h-full object-cover",onError:e=>{e.target.src="https://images.pexels.com/photos/996329/pexels-photo-996329.jpeg?auto=compress&cs=tinysrgb&w=400"}})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:s.name}),e.jsxs("p",{className:"text-xs text-gray-500",children:[s.category," • ",s.color]})]}),e.jsx("div",{className:"w-5 h-5 rounded-full border border-gray-300 flex items-center justify-center",children:f.includes(s.id)&&e.jsx("div",{className:"w-3 h-3 rounded-full bg-purple-600"})})]},s.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Add to Style Challenge (Optional)"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:N,onChange:e=>v(e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 appearance-none",children:[e.jsx("option",{value:"",children:"Select a challenge (optional)"}),p.filter(e=>e.isActive&&e.isJoined).map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]}),e.jsx(n,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 pointer-events-none",size:16})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Add Tags"}),e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(o,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:16}),e.jsx("input",{type:"text",value:F,onChange:e=>U(e.target.value),onKeyPress:e=>"Enter"===e.key&&V(),placeholder:"Add a tag",className:"w-full pl-9 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500"})]}),e.jsx("button",{onClick:V,disabled:!F.trim(),className:"px-3 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors disabled:opacity-50",children:"Add"})]}),w.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2",children:w.map(s=>e.jsxs("div",{className:"flex items-center space-x-1 px-3 py-1 bg-purple-100 text-purple-800 rounded-full",children:[e.jsxs("span",{className:"text-sm",children:["#",s]}),e.jsx("button",{onClick:()=>{return e=s,void k(w.filter(s=>s!==e));var e},className:"text-purple-600 hover:text-purple-800",children:e.jsx(r,{size:14})})]},s))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Add Location (Optional)"}),e.jsxs("div",{className:"relative",children:[e.jsx(c,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:16}),e.jsx("input",{type:"text",value:C,onChange:e=>S(e.target.value),placeholder:"Add a location",className:"w-full pl-9 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500"})]})]})]})]}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:Y,disabled:T,className:"px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 disabled:opacity-50 transition-colors",children:"Cancel"}),e.jsx(t.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:async()=>{var e;if(0!==P.length){if(!b.trim())return M("Please add a caption"),void(null==(e=$.current)||e.focus());I(!0),M(null);try{const e={caption:b,images:P,tags:w,location:C,wardrobeItems:f,challengeId:N||void 0};await m(e),j(""),y([]),v(""),k([]),S(""),z([]),A.forEach(e=>URL.revokeObjectURL(e)),D([])}catch(s){M(s.message||"Failed to create post")}finally{I(!1)}}else M("Please add at least one image")},disabled:T,className:"px-6 py-2 bg-gradient-to-r from-purple-600 to-pink-600 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white hover:from-purple-700 hover:to-pink-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 transition-all disabled:opacity-50",children:T?e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white mr-2"}),"Posting..."]}):e.jsxs("div",{className:"flex items-center",children:[e.jsx(l,{size:16,className:"mr-2"}),"Share Post"]})})]})]})]})})})},J=({challenge:s,onJoin:l})=>{const r=z(),a=e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),i=e=>{e.preventDefault(),e.stopPropagation(),r(`/community?tab=challenges&challenge=${s.id}`)};return e.jsxs(t.div,{whileHover:{y:-4},className:"bg-white/95 backdrop-blur-md rounded-2xl shadow-xl border border-white/20 overflow-hidden",children:[e.jsxs("div",{className:"relative h-48",children:[e.jsx("img",{src:s.imageUrl,alt:s.name,className:"w-full h-full object-cover",onError:e=>{e.target.src="https://images.pexels.com/photos/996329/pexels-photo-996329.jpeg?auto=compress&cs=tinysrgb&w=600"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 to-transparent"}),e.jsx("div",{className:"absolute top-3 left-3",children:e.jsx("div",{className:"px-3 py-1 rounded-full text-xs font-medium "+(s.isActive?"bg-green-100 text-green-800":new Date(s.startDate)>new Date?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"),children:s.isActive?"Active Challenge":new Date(s.startDate)>new Date?"Upcoming":"Completed"})}),e.jsxs("div",{className:"absolute bottom-3 left-3 right-3",children:[e.jsx("h3",{className:"text-white font-bold text-xl mb-1",children:s.name}),e.jsxs("div",{className:"flex items-center space-x-3 text-white/90 text-xs",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(d,{className:"w-3 h-3 mr-1"}),e.jsxs("span",{children:[a(s.startDate)," - ",a(s.endDate)]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(x,{className:"w-3 h-3 mr-1"}),e.jsxs("span",{children:[s.participants," participants"]})]})]})]})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("p",{className:"text-gray-600 text-sm mb-4",children:s.description}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-4",children:[e.jsxs("div",{className:"text-center p-2 bg-gray-50 rounded-lg",children:[e.jsx(m,{className:"w-4 h-4 mx-auto mb-1 text-purple-600"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Time Left"}),e.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:[s.daysLeft," days"]})]}),e.jsxs("div",{className:"text-center p-2 bg-gray-50 rounded-lg",children:[e.jsx(x,{className:"w-4 h-4 mx-auto mb-1 text-purple-600"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Participants"}),e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:s.participants})]}),e.jsxs("div",{className:"text-center p-2 bg-gray-50 rounded-lg",children:[e.jsx(h,{className:"w-4 h-4 mx-auto mb-1 text-purple-600"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Entries"}),e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:s.entries})]})]}),s.prizes&&s.prizes.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("h4",{className:"text-sm font-medium text-gray-900 flex items-center mb-2",children:[e.jsx(p,{className:"w-4 h-4 mr-1 text-yellow-500"}),"Prizes"]}),e.jsx("ul",{className:"text-sm text-gray-600 space-y-1 pl-6 list-disc",children:s.prizes.map((s,t)=>e.jsx("li",{children:s.name},t))})]}),e.jsx("div",{className:"flex space-x-3",children:s.isJoined?e.jsxs("button",{onClick:i,className:"flex-1 flex items-center justify-center space-x-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:[e.jsx("span",{children:"View Challenge"}),e.jsx(g,{size:16})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:l,className:"flex-1 flex items-center justify-center space-x-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:e.jsx("span",{children:"Join Challenge"})}),e.jsx("button",{onClick:i,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Details"})]})})]})]})},M=({post:s,onLike:l})=>{const[r,a]=L.useState(0),[i,n]=L.useState(!1),[o,c]=L.useState(""),[d,x]=L.useState(!1);return e.jsxs(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white/95 backdrop-blur-md rounded-2xl shadow-xl border border-white/20 overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-100",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(A,{to:`/profile/${s.user.id}`,className:"block",children:s.user.profilePic?e.jsx("img",{src:s.user.profilePic,alt:s.user.name,className:"w-10 h-10 rounded-full object-cover",onError:e=>{e.target.src="https://images.pexels.com/photos/1462637/pexels-photo-1462637.jpeg?auto=compress&cs=tinysrgb&w=150"}}):e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-purple-400 to-pink-400 rounded-full flex items-center justify-center text-white font-bold",children:s.user.name.charAt(0)})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(A,{to:`/profile/${s.user.id}`,className:"font-medium text-gray-900 hover:underline",children:s.user.name}),s.challenge&&e.jsxs("div",{className:"flex items-center ml-2",children:[e.jsx("span",{className:"text-gray-400 text-sm",children:"in"}),e.jsxs(A,{to:`/community/challenges/${s.challenge.id}`,className:"ml-1 text-sm font-medium text-purple-600 hover:text-purple-800 flex items-center",children:[e.jsx(h,{className:"w-3 h-3 mr-1"}),s.challenge.name]})]})]}),e.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[e.jsx("span",{children:(e=>{const s=new Date(e),t=new Date,l=Math.floor((t.getTime()-s.getTime())/1e3);if(l<60)return`${l}s ago`;const r=Math.floor(l/60);if(r<60)return`${r}m ago`;const a=Math.floor(r/60);if(a<24)return`${a}h ago`;const i=Math.floor(a/24);return i<7?`${i}d ago`:s.toLocaleDateString()})(s.createdAt)}),s.location&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"mx-1",children:"•"}),e.jsx("span",{children:s.location})]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[!s.user.isFollowing&&e.jsx("button",{className:"text-xs px-3 py-1 bg-purple-100 text-purple-800 rounded-full hover:bg-purple-200 transition-colors",children:"Follow"}),e.jsx("button",{className:"text-gray-400 hover:text-gray-600",children:e.jsx(u,{size:20})})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"aspect-square bg-gray-100",children:e.jsx("img",{src:s.images[r],alt:`Post by ${s.user.name}`,className:"w-full h-full object-cover",onError:e=>{e.target.src="https://images.pexels.com/photos/996329/pexels-photo-996329.jpeg?auto=compress&cs=tinysrgb&w=600"}})}),s.images.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"absolute top-1/2 left-2 transform -translate-y-1/2",children:e.jsx("button",{onClick:e=>{e.stopPropagation(),r>0&&a(r-1)},disabled:0===r,className:"p-1 rounded-full bg-white/70 backdrop-blur-sm text-gray-800 hover:bg-white transition-colors "+(0===r?"opacity-50 cursor-not-allowed":""),children:e.jsx(b,{size:20})})}),e.jsx("div",{className:"absolute top-1/2 right-2 transform -translate-y-1/2",children:e.jsx("button",{onClick:e=>{e.stopPropagation(),r<s.images.length-1&&a(r+1)},disabled:r===s.images.length-1,className:"p-1 rounded-full bg-white/70 backdrop-blur-sm text-gray-800 hover:bg-white transition-colors "+(r===s.images.length-1?"opacity-50 cursor-not-allowed":""),children:e.jsx(j,{size:20})})}),e.jsx("div",{className:"absolute bottom-2 left-1/2 transform -translate-x-1/2 flex space-x-1",children:s.images.map((s,t)=>e.jsx("div",{className:"w-2 h-2 rounded-full "+(t===r?"bg-white":"bg-white/50")},t))})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 border-t border-b border-gray-100",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("button",{onClick:l,className:"flex items-center space-x-1 "+(s.isLiked?"text-red-500":"text-gray-700 hover:text-red-500"),children:[e.jsx(f,{className:"w-6 h-6 "+(s.isLiked?"fill-current":"")}),e.jsx("span",{className:"text-sm font-medium",children:s.likes})]}),e.jsxs("button",{onClick:()=>n(!i),className:"flex items-center space-x-1 text-gray-700 hover:text-gray-900",children:[e.jsx(y,{className:"w-6 h-6"}),e.jsx("span",{className:"text-sm font-medium",children:s.comments})]}),e.jsx("button",{className:"text-gray-700 hover:text-gray-900",children:e.jsx(N,{className:"w-6 h-6"})})]}),e.jsx("button",{className:"text-gray-700 hover:text-yellow-500 "+(s.isSaved?"text-yellow-500":""),children:e.jsx(v,{className:"w-6 h-6 "+(s.isSaved?"fill-current":"")})})]}),e.jsxs("div",{className:"p-4",children:[e.jsxs("p",{className:"text-gray-900 mb-2",children:[e.jsx("span",{className:"font-medium",children:s.user.name})," ",s.caption]}),s.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1 mb-3",children:s.tags.map(s=>e.jsxs(A,{to:`/community/tags/${s}`,className:"text-sm text-purple-600 hover:text-purple-800 hover:underline",children:["#",s]},s))}),s.wardrobeItems&&s.wardrobeItems.length>0&&e.jsxs("div",{className:"mt-3",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Featured Items:"}),e.jsx("div",{className:"flex space-x-2 overflow-x-auto pb-2",children:s.wardrobeItems.map(s=>e.jsxs("div",{className:"flex-shrink-0 w-16",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-lg overflow-hidden mb-1",children:e.jsx("img",{src:s.imageUrl,alt:s.name,className:"w-full h-full object-cover",onError:e=>{e.target.src="https://images.pexels.com/photos/996329/pexels-photo-996329.jpeg?auto=compress&cs=tinysrgb&w=400"}})}),e.jsx("p",{className:"text-xs text-gray-700 truncate",children:s.name})]},s.id))})]}),i&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-100",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Comments"}),e.jsxs("form",{onSubmit:e=>{e.preventDefault(),o.trim()&&(x(!0),setTimeout(()=>{c(""),x(!1)},500))},className:"flex space-x-2 mb-4",children:[e.jsx("input",{type:"text",value:o,onChange:e=>c(e.target.value),placeholder:"Add a comment...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500"}),e.jsx("button",{type:"submit",disabled:!o.trim()||d,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50",children:d?"Posting...":"Post"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"text-sm",children:[e.jsx("span",{className:"font-medium text-gray-900",children:"Sarah"})," ",e.jsx("span",{className:"text-gray-700",children:"Love this look! The colors work so well together."})]}),e.jsxs("div",{className:"flex items-center space-x-3 mt-1 text-xs text-gray-500",children:[e.jsx("span",{children:"2h ago"}),e.jsx("button",{className:"hover:text-gray-700",children:"Like"}),e.jsx("button",{className:"hover:text-gray-700",children:"Reply"})]})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"text-sm",children:[e.jsx("span",{className:"font-medium text-gray-900",children:"Michael"})," ",e.jsx("span",{className:"text-gray-700",children:"Where did you get that jacket? It's amazing!"})]}),e.jsxs("div",{className:"flex items-center space-x-3 mt-1 text-xs text-gray-500",children:[e.jsx("span",{children:"1h ago"}),e.jsx("button",{className:"hover:text-gray-700",children:"Like"}),e.jsx("button",{className:"hover:text-gray-700",children:"Reply"})]})]})]})]}),s.comments>2&&e.jsxs("button",{className:"mt-3 text-sm text-purple-600 hover:text-purple-800",children:["View all ",s.comments," comments"]})]})]})]})},$=({users:s})=>{const l=[...s].sort((e,s)=>s.followers-e.followers),r=l.slice(0,3),a=l.slice(3);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white/95 backdrop-blur-md rounded-2xl p-6 shadow-xl border border-white/20",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-yellow-100 to-amber-100 rounded-full p-2",children:e.jsx(p,{className:"w-6 h-6 text-yellow-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Style Leaderboard"}),e.jsx("p",{className:"text-gray-600",children:"Top community members this month"})]})]}),e.jsxs("div",{className:"flex items-end justify-center space-x-4 mb-10 pt-10",children:[r.length>1&&e.jsxs(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"flex flex-col items-center",children:[e.jsxs("div",{className:"relative",children:[r[1].profilePic?e.jsx("img",{src:r[1].profilePic,alt:r[1].name,className:"w-16 h-16 rounded-full object-cover border-2 border-gray-200",onError:e=>{e.target.src="https://images.pexels.com/photos/1462637/pexels-photo-1462637.jpeg?auto=compress&cs=tinysrgb&w=150"}}):e.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-purple-400 to-pink-400 rounded-full flex items-center justify-center text-white text-xl font-bold border-2 border-gray-200",children:r[1].name.charAt(0)}),e.jsx("div",{className:"absolute -top-3 -right-1",children:e.jsx(w,{className:"w-6 h-6 text-gray-400 fill-current"})})]}),e.jsxs("div",{className:"text-center mt-2",children:[e.jsx("p",{className:"font-medium text-gray-900",children:r[1].name}),e.jsxs("p",{className:"text-xs text-gray-500",children:[r[1].followers," followers"]})]}),e.jsx("div",{className:"w-20 h-16 bg-gray-200 rounded-t-lg mt-4 flex items-center justify-center",children:e.jsx("span",{className:"text-xl font-bold text-gray-700",children:"2"})})]}),r.length>0&&e.jsxs(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"flex flex-col items-center",children:[e.jsxs("div",{className:"relative",children:[r[0].profilePic?e.jsx("img",{src:r[0].profilePic,alt:r[0].name,className:"w-20 h-20 rounded-full object-cover border-4 border-yellow-400",onError:e=>{e.target.src="https://images.pexels.com/photos/1462637/pexels-photo-1462637.jpeg?auto=compress&cs=tinysrgb&w=150"}}):e.jsx("div",{className:"w-20 h-20 bg-gradient-to-r from-purple-400 to-pink-400 rounded-full flex items-center justify-center text-white text-2xl font-bold border-4 border-yellow-400",children:r[0].name.charAt(0)}),e.jsx("div",{className:"absolute -top-4 -right-1",children:e.jsx(k,{className:"w-8 h-8 text-yellow-500 fill-current"})})]}),e.jsxs("div",{className:"text-center mt-2",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:r[0].name}),e.jsxs("p",{className:"text-xs text-gray-500",children:[r[0].followers," followers"]})]}),e.jsx("div",{className:"w-24 h-24 bg-yellow-200 rounded-t-lg mt-4 flex items-center justify-center",children:e.jsx("span",{className:"text-2xl font-bold text-yellow-700",children:"1"})})]}),r.length>2&&e.jsxs(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"flex flex-col items-center",children:[e.jsxs("div",{className:"relative",children:[r[2].profilePic?e.jsx("img",{src:r[2].profilePic,alt:r[2].name,className:"w-16 h-16 rounded-full object-cover border-2 border-gray-200",onError:e=>{e.target.src="https://images.pexels.com/photos/1462637/pexels-photo-1462637.jpeg?auto=compress&cs=tinysrgb&w=150"}}):e.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-purple-400 to-pink-400 rounded-full flex items-center justify-center text-white text-xl font-bold border-2 border-gray-200",children:r[2].name.charAt(0)}),e.jsx("div",{className:"absolute -top-3 -right-1",children:e.jsx(h,{className:"w-6 h-6 text-amber-700 fill-current"})})]}),e.jsxs("div",{className:"text-center mt-2",children:[e.jsx("p",{className:"font-medium text-gray-900",children:r[2].name}),e.jsxs("p",{className:"text-xs text-gray-500",children:[r[2].followers," followers"]})]}),e.jsx("div",{className:"w-20 h-12 bg-amber-100 rounded-t-lg mt-4 flex items-center justify-center",children:e.jsx("span",{className:"text-xl font-bold text-amber-700",children:"3"})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"bg-white/80 w-12 h-12 rounded-full flex items-center justify-center mx-auto mb-2",children:e.jsx(f,{className:"w-6 h-6 text-red-500"})}),e.jsx("h3",{className:"font-semibold text-gray-900",children:"Most Liked"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Sarah Chen"}),e.jsx("p",{className:"text-xs text-gray-500",children:"2.4K likes this month"})]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-cyan-50 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"bg-white/80 w-12 h-12 rounded-full flex items-center justify-center mx-auto mb-2",children:e.jsx(y,{className:"w-6 h-6 text-blue-500"})}),e.jsx("h3",{className:"font-semibold text-gray-900",children:"Most Engaged"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Michael Johnson"}),e.jsx("p",{className:"text-xs text-gray-500",children:"156 comments this month"})]}),e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"bg-white/80 w-12 h-12 rounded-full flex items-center justify-center mx-auto mb-2",children:e.jsx(N,{className:"w-6 h-6 text-green-500"})}),e.jsx("h3",{className:"font-semibold text-gray-900",children:"Most Shared"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Emma Rodriguez"}),e.jsx("p",{className:"text-xs text-gray-500",children:"89 shares this month"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Top Stylists"}),e.jsx("div",{className:"space-y-3",children:a.map((s,t)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"text-center w-6",children:e.jsx("span",{className:"text-sm font-semibold text-gray-700",children:t+4})}),s.profilePic?e.jsx("img",{src:s.profilePic,alt:s.name,className:"w-10 h-10 rounded-full object-cover",onError:e=>{e.target.src="https://images.pexels.com/photos/1462637/pexels-photo-1462637.jpeg?auto=compress&cs=tinysrgb&w=150"}}):e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-purple-400 to-pink-400 rounded-full flex items-center justify-center text-white font-bold",children:s.name.charAt(0)}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:s.name}),e.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[e.jsxs("span",{children:[s.followers," followers"]}),e.jsx("span",{className:"mx-1",children:"•"}),e.jsxs("span",{children:[s.posts," posts"]})]})]})]}),e.jsx("button",{className:"text-xs px-3 py-1 rounded-full "+(s.isFollowing?"bg-gray-200 text-gray-800":"bg-purple-100 text-purple-800"),children:s.isFollowing?"Following":"Follow"})]},s.id))})]})]}),e.jsxs("div",{className:"bg-white/95 backdrop-blur-md rounded-2xl p-6 shadow-xl border border-white/20",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-yellow-100 to-amber-100 rounded-full p-2",children:e.jsx(p,{className:"w-6 h-6 text-yellow-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Recent Challenge Winners"}),e.jsx("p",{className:"text-gray-600",children:"Top outfits from our style challenges"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-r from-yellow-50 to-amber-50 rounded-lg overflow-hidden",children:[e.jsx("div",{className:"h-48 bg-gray-200",children:e.jsx("img",{src:"https://images.pexels.com/photos/1462637/pexels-photo-1462637.jpeg?auto=compress&cs=tinysrgb&w=600",alt:"Monochrome Challenge Winner",className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"#MonochromeWeek"}),e.jsx(p,{className:"w-5 h-5 text-yellow-500"})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Winner: Sarah Chen"}),e.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[e.jsx(f,{className:"w-3 h-3 mr-1 text-red-500"}),e.jsx("span",{children:"342 likes"})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-gray-50 to-slate-50 rounded-lg overflow-hidden",children:[e.jsx("div",{className:"h-48 bg-gray-200",children:e.jsx("img",{src:"https://images.pexels.com/photos/1040945/pexels-photo-1040945.jpeg?auto=compress&cs=tinysrgb&w=600",alt:"Business Casual Challenge Winner",className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"#BusinessCasual"}),e.jsx(p,{className:"w-5 h-5 text-yellow-500"})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Winner: Michael Johnson"}),e.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[e.jsx(f,{className:"w-3 h-3 mr-1 text-red-500"}),e.jsx("span",{children:"287 likes"})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg overflow-hidden",children:[e.jsx("div",{className:"h-48 bg-gray-200",children:e.jsx("img",{src:"https://images.pexels.com/photos/1536619/pexels-photo-1536619.jpeg?auto=compress&cs=tinysrgb&w=600",alt:"Summer Vibes Challenge Winner",className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"#SummerVibes"}),e.jsx(p,{className:"w-5 h-5 text-yellow-500"})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Winner: Emma Rodriguez"}),e.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[e.jsx(f,{className:"w-3 h-3 mr-1 text-red-500"}),e.jsx("span",{children:"315 likes"})]})]})]})]})]})]})},W=()=>{var i,n,o;const{user:c,updateProfile:m}=E(),{items:g}=F(),u=z(),b=D(),[j,N]=L.useState(!0),[v,w]=L.useState([]),[k,A]=L.useState([]),[R,W]=L.useState([]),[O,B]=L.useState("feed"),[V,Y]=L.useState(!1),[q,H]=L.useState("all"),[G,K]=L.useState(""),[Q,X]=L.useState(!1),[Z,_]=L.useState({name:(null==c?void 0:c.name)||"",bio:"",location:"",website:"",instagram:"",twitter:""}),[ee,se]=L.useState(null);L.useEffect(()=>{const e=new URLSearchParams(b.search),s=e.get("tab"),t=e.get("challenge");"challenges"===s?B("challenges"):"leaderboard"===s&&B("leaderboard"),t&&se(t)},[b]),L.useEffect(()=>{(async()=>{N(!0);try{const[e,s,t]=await Promise.all([T.getPosts(),T.getChallenges(),T.getTrendingUsers()]);w(e),A(s),W(t)}catch(e){}finally{N(!1)}})()},[]);const te=async e=>{try{await T.joinChallenge(e),A(s=>s.map(s=>s.id===e?{...s,isJoined:!0,participants:s.participants+1}:s))}catch(s){}},le=e=>{navigator.clipboard.writeText(e).then(()=>{alert("Profile link copied to clipboard!")}).catch(e=>{})},re=v.filter(e=>"all"===q||(!("following"!==q||!e.user.isFollowing)||(!("challenges"!==q||!e.challenge)||!("trending"!==q||!e.isTrending)))).filter(e=>!G||(e.caption.toLowerCase().includes(G.toLowerCase())||e.user.name.toLowerCase().includes(G.toLowerCase())||e.challenge&&e.challenge.name.toLowerCase().includes(G.toLowerCase())||e.tags.some(e=>e.toLowerCase().includes(G.toLowerCase())))),ae=ee?k.find(e=>e.id===ee):null;return e.jsxs("div",{className:"min-h-screen relative overflow-hidden",children:[e.jsx(U,{}),e.jsx("div",{className:"relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"space-y-8",children:[e.jsxs(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white/95 backdrop-blur-md rounded-2xl p-6 shadow-xl border border-white/20",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-100 to-pink-100 rounded-full p-3",children:e.jsx(x,{className:"w-8 h-8 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Style Community"}),e.jsx("p",{className:"text-gray-600",children:"Share outfits, join challenges, and get inspired"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(C,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:18}),e.jsx("input",{type:"text",placeholder:"Search posts, challenges, users...",value:G,onChange:e=>K(e.target.value),className:"w-full sm:w-64 pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 bg-white/90 backdrop-blur-sm"})]}),e.jsxs(t.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>Y(!0),className:"flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all shadow-lg",children:[e.jsx(a,{size:18}),e.jsx("span",{children:"Create Post"})]})]})]}),e.jsxs("div",{className:"mt-6 flex space-x-1 bg-gray-100 p-1 rounded-lg w-fit",children:[e.jsxs("button",{onClick:()=>{B("feed"),se(null),u("/community")},className:"px-4 py-2 rounded-md text-sm font-medium transition-colors "+("feed"===O?"bg-white text-purple-600 shadow-sm":"text-gray-600 hover:text-gray-900"),children:[e.jsx(x,{className:"inline w-4 h-4 mr-2"}),"Community Feed"]}),e.jsxs("button",{onClick:()=>{B("challenges"),se(null),u("/community?tab=challenges")},className:"px-4 py-2 rounded-md text-sm font-medium transition-colors "+("challenges"===O?"bg-white text-purple-600 shadow-sm":"text-gray-600 hover:text-gray-900"),children:[e.jsx(h,{className:"inline w-4 h-4 mr-2"}),"Style Challenges"]}),e.jsxs("button",{onClick:()=>{B("leaderboard"),se(null),u("/community?tab=leaderboard")},className:"px-4 py-2 rounded-md text-sm font-medium transition-colors "+("leaderboard"===O?"bg-white text-purple-600 shadow-sm":"text-gray-600 hover:text-gray-900"),children:[e.jsx(S,{className:"inline w-4 h-4 mr-2"}),"Leaderboard"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs(t.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"lg:col-span-1 space-y-6",children:[e.jsxs("div",{className:"bg-white/95 backdrop-blur-md rounded-2xl p-6 shadow-xl border border-white/20",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-purple-400 to-pink-400 rounded-full flex items-center justify-center text-white text-xl font-bold",children:(null==(i=null==c?void 0:c.name)?void 0:i.charAt(0))||"U"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:(null==c?void 0:c.name)||"User"}),e.jsxs("p",{className:"text-gray-600",children:["@",(null==(n=null==c?void 0:c.name)?void 0:n.toLowerCase().replace(/\s+/g,""))||"username"]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-4",children:[e.jsxs("div",{className:"text-center p-2 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:"0"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Posts"})]}),e.jsxs("div",{className:"text-center p-2 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:"0"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Followers"})]}),e.jsxs("div",{className:"text-center p-2 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:"0"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Following"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("button",{onClick:()=>{X(!0)},className:"w-full py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all",children:"Complete Profile"}),e.jsx("button",{onClick:()=>{const e=`${window.location.origin}/community/profile/${null==c?void 0:c.id}`;navigator.share?navigator.share({title:`${null==c?void 0:c.name}'s StyleAI Profile`,text:"Check out my style profile on StyleAI!",url:e}).catch(s=>{le(e)}):le(e)},className:"w-full py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Share Profile"})]})]}),e.jsxs("div",{className:"bg-white/95 backdrop-blur-md rounded-2xl p-6 shadow-xl border border-white/20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Active Challenges"}),e.jsx("button",{onClick:()=>{B("challenges"),se(null),u("/community?tab=challenges")},className:"text-sm text-purple-600 hover:text-purple-800",children:"View All"})]}),k.filter(e=>e.isActive).slice(0,3).map(s=>e.jsxs("div",{className:"mb-3 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:s.name}),e.jsxs("span",{className:"text-xs px-2 py-1 bg-purple-100 text-purple-800 rounded-full",children:[s.daysLeft," days left"]})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:s.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-xs text-gray-500",children:[s.participants," participants"]}),s.isJoined?e.jsx("button",{onClick:()=>{se(s.id),B("challenges"),u(`/community?tab=challenges&challenge=${s.id}`)},className:"text-xs text-green-600 font-medium hover:text-green-800",children:"View Challenge"}):e.jsx("button",{onClick:()=>te(s.id),className:"text-xs text-purple-600 font-medium hover:text-purple-800",children:"Join Challenge"})]})]},s.id)),0===k.filter(e=>e.isActive).length&&e.jsxs("div",{className:"text-center py-6",children:[e.jsx(h,{className:"w-12 h-12 text-gray-300 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-500",children:"No active challenges"}),e.jsx("button",{onClick:()=>{B("challenges"),u("/community?tab=challenges")},className:"mt-2 text-sm text-purple-600 hover:text-purple-800",children:"Explore Challenges"})]})]}),e.jsxs("div",{className:"bg-white/95 backdrop-blur-md rounded-2xl p-6 shadow-xl border border-white/20",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Trending Stylists"}),R.slice(0,5).map(s=>e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-full overflow-hidden",children:s.profilePic?e.jsx("img",{src:s.profilePic,alt:s.name,className:"w-full h-full object-cover",onError:e=>{e.target.src="https://images.pexels.com/photos/1462637/pexels-photo-1462637.jpeg?auto=compress&cs=tinysrgb&w=150"}}):e.jsx("div",{className:"w-full h-full bg-gradient-to-r from-purple-400 to-pink-400 flex items-center justify-center text-white font-bold",children:s.name.charAt(0)})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:s.name}),e.jsxs("p",{className:"text-xs text-gray-500",children:[s.followers," followers"]})]})]}),e.jsx("button",{className:"text-xs px-3 py-1 rounded-full "+(s.isFollowing?"bg-gray-200 text-gray-800":"bg-purple-100 text-purple-800"),children:s.isFollowing?"Following":"Follow"})]},s.id))]})]}),e.jsx(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"lg:col-span-2",children:j?e.jsx("div",{className:"bg-white/95 backdrop-blur-md rounded-2xl p-8 shadow-xl border border-white/20",children:e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-purple-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading community content..."})]})})}):"feed"===O?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-white/95 backdrop-blur-md rounded-2xl p-4 shadow-xl border border-white/20",children:e.jsxs("div",{className:"flex items-center space-x-2 overflow-x-auto pb-2",children:[e.jsx("button",{onClick:()=>H("all"),className:"px-4 py-2 rounded-full text-sm whitespace-nowrap "+("all"===q?"bg-gradient-to-r from-purple-600 to-pink-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"All Posts"}),e.jsx("button",{onClick:()=>H("following"),className:"px-4 py-2 rounded-full text-sm whitespace-nowrap "+("following"===q?"bg-gradient-to-r from-purple-600 to-pink-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"Following"}),e.jsx("button",{onClick:()=>H("challenges"),className:"px-4 py-2 rounded-full text-sm whitespace-nowrap "+("challenges"===q?"bg-gradient-to-r from-purple-600 to-pink-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"Challenges"}),e.jsxs("button",{onClick:()=>H("trending"),className:"px-4 py-2 rounded-full text-sm whitespace-nowrap "+("trending"===q?"bg-gradient-to-r from-purple-600 to-pink-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:[e.jsx(S,{className:"w-4 h-4 inline mr-1"}),"Trending"]})]})}),0===re.length?e.jsxs("div",{className:"bg-white/95 backdrop-blur-md rounded-2xl p-8 shadow-xl border border-white/20 text-center",children:[e.jsx("div",{className:"bg-gray-100 rounded-full p-6 w-24 h-24 mx-auto mb-6",children:e.jsx(x,{className:"w-12 h-12 text-gray-400"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Posts Found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"all"===q?"Be the first to share your style with the community!":"following"===q?"Follow some stylists to see their posts here":"challenges"===q?"Join a challenge and share your entry":"No trending posts at the moment"}),e.jsxs("button",{onClick:()=>Y(!0),className:"inline-flex items-center px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all shadow-lg",children:[e.jsx(a,{size:18,className:"mr-2"}),"Create First Post"]})]}):re.map(s=>e.jsx(M,{post:s,onLike:()=>(async e=>{try{await T.likePost(e),w(s=>s.map(s=>s.id===e?{...s,likes:s.isLiked?s.likes-1:s.likes+1,isLiked:!s.isLiked}:s))}catch(s){}})(s.id)},s.id))]}):"challenges"===O?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-white/95 backdrop-blur-md rounded-2xl p-4 shadow-xl border border-white/20",children:e.jsxs("div",{className:"flex items-center space-x-2 overflow-x-auto pb-2",children:[e.jsx("button",{onClick:()=>{se(null),u("/community?tab=challenges")},className:"px-4 py-2 rounded-full text-sm whitespace-nowrap "+(ee?"bg-gray-100 text-gray-700 hover:bg-gray-200":"bg-gradient-to-r from-purple-600 to-pink-600 text-white"),children:"All Challenges"}),e.jsx("button",{className:"px-4 py-2 rounded-full text-sm whitespace-nowrap bg-gray-100 text-gray-700 hover:bg-gray-200",children:"Active"}),e.jsx("button",{className:"px-4 py-2 rounded-full text-sm whitespace-nowrap bg-gray-100 text-gray-700 hover:bg-gray-200",children:"Upcoming"}),e.jsx("button",{className:"px-4 py-2 rounded-full text-sm whitespace-nowrap bg-gray-100 text-gray-700 hover:bg-gray-200",children:"Completed"}),e.jsx("button",{className:"px-4 py-2 rounded-full text-sm whitespace-nowrap bg-gray-100 text-gray-700 hover:bg-gray-200",children:"My Challenges"})]})}),ee&&ae&&e.jsxs("div",{className:"bg-white/95 backdrop-blur-md rounded-2xl shadow-xl border border-white/20 overflow-hidden",children:[e.jsxs("div",{className:"relative h-64",children:[e.jsx("img",{src:ae.imageUrl,alt:ae.name,className:"w-full h-full object-cover",onError:e=>{e.target.src="https://images.pexels.com/photos/996329/pexels-photo-996329.jpeg?auto=compress&cs=tinysrgb&w=600"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 to-transparent"}),e.jsx("div",{className:"absolute top-4 left-4",children:e.jsx("button",{onClick:()=>{se(null),u("/community?tab=challenges")},className:"px-3 py-1 bg-white/80 backdrop-blur-sm rounded-full text-gray-800 hover:bg-white transition-colors",children:"← Back to Challenges"})}),e.jsxs("div",{className:"absolute bottom-4 left-4 right-4",children:[e.jsx("h2",{className:"text-white text-3xl font-bold mb-2",children:ae.name}),e.jsxs("div",{className:"flex items-center space-x-4 text-white/90",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(d,{className:"w-4 h-4 mr-1"}),e.jsxs("span",{children:[new Date(ae.endDate).toLocaleDateString()," (",ae.daysLeft," days left)"]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(x,{className:"w-4 h-4 mr-1"}),e.jsxs("span",{children:[ae.participants," participants"]})]})]})]})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Challenge Details"}),e.jsx("p",{className:"text-gray-600",children:ae.description})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-1",children:"Timeline"}),e.jsxs("p",{className:"text-sm text-gray-600",children:[new Date(ae.startDate).toLocaleDateString()," - ",new Date(ae.endDate).toLocaleDateString()]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-1",children:"Entries"}),e.jsxs("p",{className:"text-sm text-gray-600",children:[ae.entries," submissions"]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-1",children:"Status"}),e.jsx("p",{className:"text-sm text-gray-600",children:ae.isJoined?"You have joined this challenge":"You have not joined yet"})]})]}),ae.prizes&&ae.prizes.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Prizes"}),e.jsx("div",{className:"bg-gradient-to-r from-yellow-50 to-amber-50 rounded-lg p-4",children:e.jsx("ul",{className:"space-y-2",children:ae.prizes.map((s,t)=>e.jsxs("li",{className:"flex items-start",children:[e.jsx(p,{className:"w-5 h-5 text-yellow-600 mr-2 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:s.name}),s.description&&e.jsx("p",{className:"text-sm text-gray-600",children:s.description})]})]},t))})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Challenge Entries"}),v.filter(e=>{var s;return(null==(s=e.challenge)?void 0:s.id)===ee}).length>0?e.jsx("div",{className:"grid grid-cols-2 gap-4",children:v.filter(e=>{var s;return(null==(s=e.challenge)?void 0:s.id)===ee}).map(s=>e.jsxs("div",{className:"bg-gray-50 rounded-lg overflow-hidden",children:[e.jsx("img",{src:s.images[0],alt:`Entry by ${s.user.name}`,className:"w-full h-48 object-cover",onError:e=>{e.target.src="https://images.pexels.com/photos/996329/pexels-photo-996329.jpeg?auto=compress&cs=tinysrgb&w=400"}}),e.jsxs("div",{className:"p-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("div",{className:"w-6 h-6 rounded-full overflow-hidden",children:s.user.profilePic?e.jsx("img",{src:s.user.profilePic,alt:s.user.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-gradient-to-r from-purple-400 to-pink-400"})}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:s.user.name})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(f,{className:"w-3 h-3 mr-1"}),e.jsx("span",{children:s.likes})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(y,{className:"w-3 h-3 mr-1"}),e.jsx("span",{children:s.comments})]})]}),e.jsx("span",{children:new Date(s.createdAt).toLocaleDateString()})]})]})]},s.id))}):e.jsxs("div",{className:"text-center py-8 bg-gray-50 rounded-lg",children:[e.jsx(l,{className:"w-12 h-12 text-gray-300 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"No entries yet for this challenge"}),e.jsx("button",{onClick:()=>Y(!0),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"Submit Your Entry"})]})]}),e.jsx("div",{className:"flex justify-center",children:ae.isJoined?e.jsx("button",{onClick:()=>Y(!0),className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all shadow-lg",children:"Submit Your Entry"}):e.jsx("button",{onClick:()=>te(ee),className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all shadow-lg",children:"Join This Challenge"})})]})]}),!ee&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:0===k.length?e.jsxs("div",{className:"md:col-span-2 bg-white/95 backdrop-blur-md rounded-2xl p-8 shadow-xl border border-white/20 text-center",children:[e.jsx("div",{className:"bg-gray-100 rounded-full p-6 w-24 h-24 mx-auto mb-6",children:e.jsx(h,{className:"w-12 h-12 text-gray-400"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Challenges Available"}),e.jsx("p",{className:"text-gray-600",children:"Check back soon for exciting style challenges!"})]}):k.map(s=>e.jsx(J,{challenge:s,onJoin:()=>te(s.id)},s.id))})]}):e.jsx($,{users:R})})]})]})}),e.jsx(I,{isOpen:V,onClose:()=>Y(!1),onSubmit:async e=>{try{const s=await T.createPost(e);w(e=>[s,...e]),Y(!1)}catch(s){}},wardrobeItems:g,challenges:k}),e.jsx(s,{children:Q&&e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx(t.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-gray-900/75 backdrop-blur-sm transition-opacity",onClick:()=>X(!1)}),e.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"​"}),e.jsxs(t.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"relative inline-block align-bottom bg-white rounded-2xl text-left overflow-hidden shadow-2xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",onClick:e=>e.stopPropagation(),children:[e.jsxs("div",{className:"flex justify-between items-center px-6 py-4 bg-gradient-to-r from-purple-50 to-pink-50 border-b",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-100 to-pink-100 rounded-full p-2",children:e.jsx(P,{className:"w-5 h-5 text-purple-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Complete Your Profile"})]}),e.jsx("button",{type:"button",onClick:()=>X(!1),className:"text-gray-500 hover:text-gray-700 transition-colors",children:e.jsx(r,{size:20})})]}),e.jsx("div",{className:"px-6 py-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-24 h-24 bg-gradient-to-r from-purple-400 to-pink-400 rounded-full flex items-center justify-center text-white text-3xl font-bold",children:(null==(o=null==c?void 0:c.name)?void 0:o.charAt(0))||"U"}),e.jsx("button",{className:"absolute bottom-0 right-0 p-1 bg-purple-600 rounded-full text-white hover:bg-purple-700 transition-colors",children:e.jsx(l,{size:16})})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),e.jsx("input",{type:"text",value:Z.name,onChange:e=>_({...Z,name:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bio"}),e.jsx("textarea",{value:Z.bio,onChange:e=>_({...Z,bio:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 resize-none",rows:3,placeholder:"Tell the community about yourself and your style..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Location"}),e.jsx("input",{type:"text",value:Z.location,onChange:e=>_({...Z,location:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500",placeholder:"City, Country"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Website"}),e.jsx("input",{type:"url",value:Z.website,onChange:e=>_({...Z,website:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500",placeholder:"https://yourwebsite.com"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Instagram"}),e.jsxs("div",{className:"flex",children:[e.jsx("span",{className:"inline-flex items-center px-3 rounded-l-md border border-r-0 border-gray-300 bg-gray-50 text-gray-500 text-sm",children:"@"}),e.jsx("input",{type:"text",value:Z.instagram,onChange:e=>_({...Z,instagram:e.target.value}),className:"flex-1 px-4 py-2 border border-gray-300 rounded-r-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500",placeholder:"username"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Twitter"}),e.jsxs("div",{className:"flex",children:[e.jsx("span",{className:"inline-flex items-center px-3 rounded-l-md border border-r-0 border-gray-300 bg-gray-50 text-gray-500 text-sm",children:"@"}),e.jsx("input",{type:"text",value:Z.twitter,onChange:e=>_({...Z,twitter:e.target.value}),className:"flex-1 px-4 py-2 border border-gray-300 rounded-r-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500",placeholder:"username"})]})]})]})]})}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>X(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 transition-colors",children:"Cancel"}),e.jsx("button",{type:"button",onClick:async()=>{try{await m(Z),X(!1)}catch(e){}},className:"px-6 py-2 bg-gradient-to-r from-purple-600 to-pink-600 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white hover:from-purple-700 hover:to-pink-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 transition-all",children:"Save Profile"})]})]})]})})})]})};export{W as default};
